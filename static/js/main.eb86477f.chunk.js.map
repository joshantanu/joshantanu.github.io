{"version":3,"sources":["components/MonthView.js","firebase/config.js","AppConst.js","components/Qty.js","App.js","index.js"],"names":["React","memo","MonthView","props","monthData","rateBuff","rateCow","month","undefined","days","Object","keys","totalCow","totalBuff","forEach","day","eval","cow","buff","totalCowBill","totalBuffBill","grantTotalBill","className","map","index","colSpan","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","GoogleAuthProvider","denomination","monthNames","milkType","controlClick","rate","otherSize","width","itm","i","type","value","defaultChecked","name","onClick","size","style","onChange","defaultValue","db","firestore","App","useState","formData","setformData","date","Date","buildDateObj","thisDate","newDate","dmy","getDate","getMonth","year","getFullYear","selectedDMY","setSelectedDMY","monthlyData","setmonthlyData","monthlyRate","setmonthlyRate","yearlyData","setyearlyData","fetchData","a","doc","get","then","querySnapshot","data","useEffect","Rate","filterMonthlyData","getFormData","obj","thisformData","target","console","log","selected","maxDate","cow_rate","buff_rate","set","merge","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eb86477f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default React.memo(function MonthView(props) {\r\n  //console.log('monthview',props)\r\n  const { monthData, rateBuff, rateCow, month } = props;\r\n\r\n  if (monthData !== undefined) {\r\n    let days = Object.keys(monthData);\r\n    // console.log(\"keys:\", days);\r\n\r\n    let totalCow = 0;\r\n    let totalBuff = 0;\r\n    days.forEach((day) => {\r\n      totalCow += eval(monthData[day].cow);\r\n      totalBuff += eval(monthData[day].buff);\r\n    });\r\n\r\n    const totalCowBill = totalCow * rateCow;\r\n    const totalBuffBill = totalBuff * rateBuff;\r\n    const grantTotalBill = totalCowBill + totalBuffBill;\r\n    return (\r\n      <>\r\n      <hr />\r\n      <h4 className=\"text-center\">Monthly View - { month}</h4>\r\n        <table className=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th>Date</th>\r\n              <th className=\"text-center\">Cow</th>\r\n              <th className=\"text-center\">Buffello</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {days.map((day, index) => (\r\n              <tr key={index}>\r\n                <td>{day}</td>\r\n                <td className=\"text-center\">{monthData[day].cow}</td>\r\n                <td className=\"text-center\">{monthData[day].buff}</td>\r\n              </tr>\r\n            ))}\r\n            <tr>\r\n              <th>Total Liters</th>\r\n              <th className=\"text-center\">{totalCow}</th>\r\n              <th className=\"text-center\">{totalBuff}</th>\r\n            </tr>\r\n            <tr>\r\n              <th>Rate</th>\r\n              <th className=\"text-center\">{props.rateCow}</th>\r\n              <th className=\"text-center\">{props.rateBuff}</th>\r\n            </tr>\r\n            <tr>\r\n              <th>Total Bill</th>\r\n              <th className=\"text-center\">{totalCowBill}</th>\r\n              <th className=\"text-center\">{totalBuffBill}</th>\r\n            </tr>\r\n            <tr>\r\n              <th>Grant Total</th>\r\n              <th colSpan={2} className=\"text-center bg-success text-white\">\r\n                <h3>&#8377; {grantTotalBill}</h3>\r\n              </th>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  } else return null;\r\n});\r\n","import firebase from 'firebase';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyCR7va4fDp1vFeMaYbRKXg03iOzzYAoHUk\",\r\n    authDomain: \"ddapp-e3389.firebaseapp.com\",\r\n    projectId: \"ddapp-e3389\",\r\n    storageBucket: \"ddapp-e3389.appspot.com\",\r\n    messagingSenderId: \"81508684530\",\r\n    appId: \"1:81508684530:web:e07e8d90072ec63236766b\"\r\n  };\r\n\r\n//firebase.initializeApp(config);\r\n\r\nconst app = firebase.initializeApp(config);\r\n\r\n// export const auth = firebase.auth();\r\n// export const firestore = firebase.firestore(app);\r\n\r\n// const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n// provider.setCustomParameters({prompt: 'select_account'});\r\n\r\n// export const signInWithGoogle = () => auth.signInWithPopup(provider);\r\n  const GoogleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const SignInWithFirebase = () =>{\r\n  firebase.auth().signInWithPopup(GoogleAuthProvider)\r\n  .then((result)=>{\r\n    console.log(result.user.displayName)\r\n    return result;\r\n  })\r\n  .catch((err)=>{\r\n    console.log(err)\r\n  })\r\n}\r\nexport const LogoutWithFirebase = () =>{\r\n  firebase.auth().signOut();\r\n}\r\n\r\n// //const auth = getAuth();\r\n// signInWithPopup(auth, provider)\r\n//   .then((result) => {\r\n//     // This gives you a Google Access Token. You can use it to access the Google API.\r\n//     const credential = GoogleAuthProvider.credentialFromResult(result);\r\n//     const token = credential.accessToken;\r\n//     // The signed-in user info.\r\n//     const user = result.user;\r\n//     // ...\r\n//   }).catch((error) => {\r\n//     // Handle Errors here.\r\n//     const errorCode = error.code;\r\n//     const errorMessage = error.message;\r\n//     // The email of the user's account used.\r\n//     const email = error.email;\r\n//     // The AuthCredential type that was used.\r\n//     const credential = GoogleAuthProvider.credentialFromError(error);\r\n//     // ...\r\n//   });\r\n\r\nexport default firebase;","\r\nexport const denomination = [\r\n    \"0\",\r\n    \"0.5\",\r\n    \"1\",\r\n    \"1.5\",\r\n    \"2\"\r\n];\r\n\r\nexport const monthNames = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];","import React from \"react\";\r\nimport { denomination } from \"../AppConst\";\r\n\r\nexport default React.memo(function Qty(props) {\r\n  const { milkType, controlClick, rate } = props;\r\n  const otherSize = { width: 50 };\r\n\r\n  return (\r\n    <>\r\n      {denomination.map((itm, i) => (\r\n        <div key={i} className=\"p-1\">\r\n          <label>\r\n            <input\r\n              type=\"radio\"\r\n              value={itm}\r\n              defaultChecked={(itm===\"1\")}\r\n              name={milkType}\r\n              onClick={controlClick}\r\n            /> {itm}\r\n          </label>\r\n        </div>\r\n      ))}\r\n      <div className=\"p-1\">\r\n        <input type=\"radio\" value=\"0\" name={milkType} onClick={controlClick} /> Other \r\n        <input\r\n          type=\"number\"\r\n          name={milkType}\r\n          size=\"2\"     \r\n          style={otherSize}\r\n          onChange={controlClick}\r\n        />\r\n      </div>\r\n      <div className=\"p-1\">\r\n        Rate \r\n        <input\r\n          type=\"number\"\r\n          name={`${milkType}_rate`}\r\n          defaultValue={rate[milkType]}\r\n          size=\"2\"     \r\n          style={otherSize}\r\n          onChange={controlClick}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n})\r\n","import React, { useEffect, useState } from \"react\";\nimport DatePicker from \"sassy-datepicker\";\nimport MonthView from \"./components/MonthView\";\nimport firebase from \"./firebase/config\";\n//import firebase, {SignInWithFirebase, LogoutWithFirebase} from \"./firebase/config\";\nimport { monthNames } from \"./AppConst\";\nimport Qty from \"./components/Qty\";\nconst db = firebase.firestore();\n\nfunction App() {\n  const [formData, setformData] = useState({ cow: 1, buff: 1 });\n  //const [date, setDate] = useState(new Date());\n  let date = new Date();\n  const buildDateObj = (thisDate) => {\n    const newDate = new Date(thisDate);\n    let dmy = {};\n    dmy.date = newDate.getDate();\n    dmy.month = monthNames[newDate.getMonth()];\n    dmy.year = newDate.getFullYear();\n    return { ...dmy };\n  };\n  //let selectedDMY = buildDateObj(date);\n  const [selectedDMY, setSelectedDMY] = useState(buildDateObj(date));\n  const [monthlyData, setmonthlyData] = useState({});\n  const [monthlyRate, setmonthlyRate] = useState({ cow: 52, buff: 64 });\n  const [yearlyData, setyearlyData] = useState({});\n\n  const filterMonthlyData = () => {\n    const monthlyData = yearlyData[selectedDMY.month];\n    if (monthlyData) {\n      monthlyData.Rate = monthlyData.Rate || monthlyRate;\n      setmonthlyRate(monthlyData.Rate);\n      delete monthlyData.Rate;\n      setmonthlyData(monthlyData);\n    } else {\n      setmonthlyData({});\n    }\n  };\n\n  const fetchData = async () => {\n    db.doc(`appDB/${selectedDMY.year}`)\n      .get()\n      .then((querySnapshot) => {\n        setyearlyData(querySnapshot.data());\n        //console.log(dailyData)\n      });\n  };\n  useEffect(() => {\n    filterMonthlyData();\n  }, [yearlyData, selectedDMY.month]);\n\n  useEffect(() => {\n    fetchData();\n  }, [selectedDMY.year]);\n\n  const setData = () => {\n    formData.cow_rate = formData.cow_rate || monthlyRate.cow;\n    formData.buff_rate = formData.buff_rate || monthlyRate.buff;\n\n    db.doc(`appDB/${selectedDMY.year}`)\n      .set(\n        {\n          [selectedDMY.month]: {\n            [selectedDMY.date]: {\n              cow: formData.cow,\n              buff: formData.buff,\n            },\n            Rate: {\n              cow: formData.cow_rate,\n              buff: formData.buff_rate,\n            },\n          },\n        },\n        { merge: true }\n      )\n      .then(() => {\n        alert(\"Data Successfully Submitted\");\n        fetchData();\n      });\n  };\n\n  const getFormData = (obj) => {\n    let thisformData = {};\n    thisformData[obj.target.name] = obj.target.value;\n    //console.log(formData);\n    setformData({ ...formData, ...thisformData });\n  };\n\n  const onDateChange = (thisDate) => {\n    //const dmy = buildDateObj(thisDate);\n    // console.log(dmy)\n    //newDate = ${newDate.getFullYear()} ${monthNames[newDate.getMonth()]} ${newDate.getDate()}`);\n    date = thisDate;\n    setSelectedDMY(buildDateObj(thisDate));\n    // selectedDMY = buildDateObj(thisDate);\n    console.log(selectedDMY.month);\n    // filterMonthlyData();\n  };\n\n  // const [isUserSignedIn, setisUserSignedIn] = useState();\n  // firebase.auth().onAuthStateChanged((user)=>{\n  //   if(user){\n  //     return setisUserSignedIn(true);\n  //   }\n  //   setisUserSignedIn(false);\n  // })\n\n  return (\n    <>\n      <h3 className=\"p-3 mb-2 bg-info text-white\">Ashtavinayak Milk App</h3>\n      {/* <a href=\"#\" onClick={SignInWithFirebase}>Login</a>\n      <a href=\"#\" onClick={LogoutWithFirebase}>Logout</a>\n      // {console.log(isUserSignedIn)} |  */}\n\n      <div className=\"text-center\">\n        <DatePicker\n          onChange={onDateChange}\n          selected={date}\n          maxDate={new Date()}\n        />\n      </div>\n      <br />\n      {/* {console.log(yearlyData)} */}\n      <table className=\"table\">\n        <tbody>\n          <tr>\n            <th>Cow</th>\n            <th>Buffello</th>\n          </tr>\n          <tr>\n            <td>\n              <Qty\n                milkType=\"cow\"\n                controlClick={getFormData}\n                rate={monthlyRate}\n              />\n            </td>\n            <td>\n              <Qty\n                milkType=\"buff\"\n                controlClick={getFormData}\n                rate={monthlyRate}\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div className=\"text-center\">\n        <button onClick={setData} className=\"btn btn-primary\">\n          SUBMIT\n        </button>\n      </div>\n      <div>\n        <br />\n      </div>\n      <MonthView\n        monthData={monthlyData}\n        month={selectedDMY.month}\n        rateCow={monthlyRate.cow}\n        rateBuff={monthlyRate.buff}\n      />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}